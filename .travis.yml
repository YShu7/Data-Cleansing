language: python

python:
 - "3.7"

services:
 - postgresql

env:
 - DJANGO=2.2.8

install:
 - pip install -r requirements.txt --quiet
 - pip install django==$DJANGO --quiet
 - pip install psycopg2 --quiet
 - pip install codecov --quiet

before_script:
- wget http://chromedriver.storage.googleapis.com/80.0.3987.106/chromedriver_linux64.zip
- unzip chromedriver_linux64.zip -d /home/travis/virtualenv/python3.7.1/bin/
- export CHROME_BIN=chromium-browser

script:
- python manage.py test

branches:
  only:
    - master
    - develop

after_success:
 - codecov
